import{_ as n,e as s}from"./app.530372a1.js";const a={},p=s(`<h1 id="eth-java-\u626B\u5757\u5F00\u53D1" tabindex="-1"><a class="header-anchor" href="#eth-java-\u626B\u5757\u5F00\u53D1" aria-hidden="true">#</a> ETH java \u626B\u5757\u5F00\u53D1</h1><hr><blockquote><p>\u987E\u540D\u601D\u4E49\uFF0C\u5C31\u662F\u6839\u636E\u533A\u5757\u53F7\u626B\u63CF\u8BE5\u533A\u5757\u7684\u4EA4\u6613\u4FE1\u606F\uFF0C\u4ECE\u4E2D\u627E\u5230\u6211\u4EEC\u5173\u5FC3\u7684from\u5730\u5740\u548Cto\u5730\u5740</p><p>\u90A3\u4E48\u5E94\u8BE5\u600E\u4E48\u626B\u5757\u5462</p></blockquote><h3 id="_1-pom\u6587\u4EF6\u5F15\u5165" tabindex="-1"><a class="header-anchor" href="#_1-pom\u6587\u4EF6\u5F15\u5165" aria-hidden="true">#</a> 1.pom\u6587\u4EF6\u5F15\u5165</h3><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.web3j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.8.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_2-java\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#_2-java\u4EE3\u7801" aria-hidden="true">#</a> 2.java\u4EE3\u7801</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u5F53\u7136\u8981\u4F7F\u7528web3j\u4E86\uFF0Cweb3j\u7684java\u7248\u672C</span>
<span class="token comment">// \u4EE5\u4E0B\u662F\u6E90\u7801</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>fastjson<span class="token punctuation">.</span></span>JSON<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>fastjson<span class="token punctuation">.</span></span><span class="token class-name">JSONObject</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>fastjson<span class="token punctuation">.</span>serializer<span class="token punctuation">.</span></span><span class="token class-name">SerializerFeature</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>databind<span class="token punctuation">.</span></span><span class="token class-name">ObjectMapper</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span></span><span class="token class-name">ObjectMapperFactory</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span></span><span class="token class-name">Web3j</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">DefaultBlockParameter</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>response<span class="token punctuation">.</span></span><span class="token class-name">EthBlock</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>response<span class="token punctuation">.</span></span><span class="token class-name">EthTransaction</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>response<span class="token punctuation">.</span></span><span class="token class-name">Transaction</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>websocket<span class="token punctuation">.</span></span><span class="token class-name">WebSocketService</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigInteger</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EthWsTest</span> <span class="token punctuation">{</span>

    
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testEthWsClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// \u627E\u4E2Ainfra\u94FE\u63A5</span>
            <span class="token class-name">String</span> apiServerUrl <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">Web3j</span> web3j <span class="token operator">=</span> <span class="token class-name">Web3j</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HttpService</span><span class="token punctuation">(</span>apiServerUrl<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token class-name">ObjectMapperFactory</span><span class="token punctuation">.</span><span class="token function">getObjectMapper</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// \u5148\u8C03\u7528\u83B7\u53D6\u533A\u5757\u53F7\u63A5\u53E3\uFF0C\u62FF\u5230\u533A\u5757\u53F7</span>
            <span class="token class-name">String</span> reqString <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>web3j<span class="token punctuation">.</span><span class="token function">ethBlockNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>reqString<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">BigInteger</span> blockNumber <span class="token operator">=</span> web3j<span class="token punctuation">.</span><span class="token function">ethBlockNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBlockNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>blockNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// \u8FD9\u91CC\u662F\u6839\u636E\u4EA4\u6613hash\uFF0C\u83B7\u53D6\u4EA4\u6613\u8BE6\u60C5</span>
            <span class="token class-name">EthTransaction</span> send <span class="token operator">=</span> web3j<span class="token punctuation">.</span><span class="token function">ethGetTransactionByHash</span><span class="token punctuation">(</span><span class="token string">&quot;0x7528078a2725300b298aad6fd86e77fb1efd2c0e909847d597f4829f0a559499&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">BigInteger</span> big <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token string">&quot;6285815&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">DefaultBlockParameter</span> parameter <span class="token operator">=</span> <span class="token class-name">DefaultBlockParameter</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>big<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// \u8FD9\u91CC\u662F\u6839\u636E\u533A\u5757\u53F7\u83B7\u53D6\u533A\u5757\u7684\u4EA4\u6613hash</span>
            <span class="token class-name">EthBlock</span> ethBlock <span class="token operator">=</span> web3j<span class="token punctuation">.</span><span class="token function">ethGetBlockByNumber</span><span class="token punctuation">(</span>parameter<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">String</span> x <span class="token operator">=</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>ethBlock<span class="token punctuation">,</span> <span class="token class-name">SerializerFeature<span class="token punctuation">.</span>DisableCircularReferenceDetect</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">JSONObject</span> obj <span class="token operator">=</span> JSON<span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">EthBlock</span> ethBlock1 <span class="token operator">=</span> JSON<span class="token punctuation">.</span><span class="token function">toJavaObject</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token class-name">EthBlock</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">EthBlock</span> ethBlock2 <span class="token operator">=</span> JSON<span class="token punctuation">.</span><span class="token function">toJavaObject</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token class-name">EthBlock</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">EthBlock<span class="token punctuation">.</span>TransactionResult</span><span class="token punctuation">&gt;</span></span> transactions2 <span class="token operator">=</span> ethBlock2<span class="token punctuation">.</span><span class="token function">getBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTransactions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>transactions2<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">EthBlock<span class="token punctuation">.</span>TransactionResult</span><span class="token punctuation">&gt;</span></span> transactions <span class="token operator">=</span> ethBlock1<span class="token punctuation">.</span><span class="token function">getBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTransactions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>transactions<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token class-name">Transaction</span> transaction <span class="token operator">=</span> send<span class="token punctuation">.</span><span class="token function">getTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>transaction<span class="token punctuation">.</span><span class="token function">getBlockNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span>transaction<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token comment">//        System.out.println(newBlockNum);</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// \u6839\u636E\u533A\u5757\u53F7\u62FF\u5230\u4FE1\u606F\u5C31\u5F00\u59CB\u904D\u5386\u5427\u3002</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><hr><blockquote><p>\u9700\u8981\u4E00\u70B9\u70B9\u57FA\u7840\uFF0C\u4E0D\u662F\u50BB\u74DC\u5F0F\u6559\u7A0B\uFF0C\u8FD9\u91CC\u662F\u7ED9\u81EA\u5DF1\u505A\u4E00\u4E2A\u7B14\u8BB0</p><p>\u91CC\u9762\u6709\u5F88\u591A\u5224\u65AD\u8981\u505A\uFF0C\u6BD4\u5982\u53EA\u89E3\u6790\u4F60\u5173\u5FC3\u7684\u5408\u7EA6\uFF0C\u4F60\u5173\u5FC3\u7684from\u5730\u5740\u548Cto\u5730\u5740</p><p>erc20\u89E3\u6790</p></blockquote><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>\u89E3\u6790\u5173\u952E\u5B57\uFF0C\u533A\u5757\u53F7\uFF0C\u4EA4\u6613hash\uFF0Cfrom ,to 
\u6B65\u9AA4\u662F:  \u83B7\u53D6\u533A\u5757\u53F7=&gt;\u6839\u636E\u533A\u5757\u53F7\u67E5\u8BE2\u4EA4\u6613hash\u96C6\u5408=&gt;
        \u6839\u636E\u4EA4\u6613hash\u67E5\u8BE2\u4EA4\u6613\u8BE6\u60C5=&gt;\u89E3\u6790\u4EA4\u6613\u8BE6\u60C5\uFF0C\u5F97\u5230\u5173\u5FC3\u7684from\u5730\u5740\u548Cto\u5730\u5740\uFF0C\u8FD8\u6709\u91D1\u989D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_3-\u8282\u70B9\u94FE\u63A5" tabindex="-1"><a class="header-anchor" href="#_3-\u8282\u70B9\u94FE\u63A5" aria-hidden="true">#</a> 3.\u8282\u70B9\u94FE\u63A5</h3><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>infura\u7684\u8282\u70B9\u63D0\u4F9B\u5546\uFF1Ahttps://infura.io/zh
\u6216\u8005\u4F7F\u7528ankr
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_4-\u6D4B\u8BD5\u5E01\u9886\u53D6\u5730\u5740" tabindex="-1"><a class="header-anchor" href="#_4-\u6D4B\u8BD5\u5E01\u9886\u53D6\u5730\u5740" aria-hidden="true">#</a> 4.\u6D4B\u8BD5\u5E01\u9886\u53D6\u5730\u5740</h3><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>\u9886\u6C34\u5730\u5740\uFF1Ahttps://faucet.paradigm.xyz/?continueFlag=cf030efc93fc955252497e163e22ab63
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,14);function t(e,c){return p}var l=n(a,[["render",t],["__file","eth_java.html.vue"]]);export{l as default};
